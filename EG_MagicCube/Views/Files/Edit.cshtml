@model Dictionary<long, string>

<h2>圖片列表</h2>
<div class="">
    <div>
        @Html.ActionLink("作品清單", "Index", "Works")
    </div>
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12  text-right">
        <input type="button" id="delete-btn" class="btn btn-default" value="選取後刪除">
    </div>
</div>

@if (Model != null && Model.Count > 0)
{
    
    foreach (var item in Model)
    {
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 ">
            <div>
                <img src="data:image/png;base64,@Html.Raw(item.Value)" />
            </div>
            <div>
                <div class="col-lg-2 col-md-3  col-sm-6 col-xs-3 " style="font-size:55px;">
                    <i class="fa fa-square-o fa-6" aria-hidden="true" value="@Html.Raw(item.Key)"></i>
                </div>
            </div>
        </div>
    }
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $('i.fa').click(function () {
            $(this).toggleClass('fa-square-o');
            $(this).toggleClass('fa-check-square-o');
        });

        $('input#delete-btn').click(function () {
            var d = $('i.fa-check-square-o');
            var data = [];
            for (var i = 0; i < d.length; i++) {
                data[i] = $(d[i]).attr('value');
            }
             $.ajax({
                type: "Post",
                url: '@Url.Action("Delete")',
                data: { id: data },
                async: true,
                cache: false,
                dataType: "json",
                success: function (data) {
                    location.reload();
                },
                error: function (viewHTML) {
                    alert("載入異常....");
                }
            });
        });
    </script>
}



