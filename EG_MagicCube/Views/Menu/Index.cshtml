@model IEnumerable<EG_MagicCube.Models.ViewModel.MenuViewModels>

@{
    ViewBag.Title = "選項維護";
    //Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .tags {
        list-style: none;
        margin: 0;
        overflow: hidden;
        padding: 0;
    }

        .tags li {
            float: left;
        }

    .tag {
        background: #eee;
        border-radius: 3px 0 0 3px;
        color: #999;
        display: inline-block;
        height: 26px;
        line-height: 26px;
        padding: 0 20px 0 23px;
        position: relative;
        margin: 0 10px 10px 0;
        text-decoration: none;
        -webkit-transition: color 0.2s;
    }

        .tag::before {
            background: #fff;
            border-radius: 10px;
            box-shadow: inset 0 1px rgba(0, 0, 0, 0.25);
            content: '';
            height: 6px;
            left: 10px;
            position: absolute;
            width: 6px;
            top: 10px;
        }

        .tag::after {
            background: #fff;
            border-bottom: 13px solid transparent;
            border-left: 10px solid #eee;
            border-top: 13px solid transparent;
            content: '';
            position: absolute;
            right: 0;
            top: 0;
        }

        .tag:hover {
            background-color: #999;
            color: white;
        }

            .tag:hover::after {
                border-left-color: #999;
            }
</style>
<h2>選項維護</h2>

@using (Html.BeginForm())
{
    <div class="form-group">

        <div class="col-md-offset-1 col-md-10">
            <label class="control-label">選項類別</label>@Html.DropDownList("MenuClass", (IEnumerable<SelectListItem>)ViewBag.MenuClassList, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">

        <div class="col-md-offset-1 col-md-10">
            <label class="control-label">名稱</label><input class="form-control" id="MenuName" name="MenuName"/>
        </div>
    </div>
    <br /><br />
    <div class="form-group">
        <div class="col-md-offset-5 col-md-7">
            <input type="hidden" id="whosubmit" name="whosubmit" />
            <input type="hidden" id="MenuNo" name="MenuNo" />
            <input type="submit" value="儲存" class="btn btn-default" id="btnSave" />
            <input type="submit" value="取消" class="btn btn-default" id="btnCancel" />
            <input type="submit" value="新增" class="btn btn-default" id="btnaddnew" />
            <input type="submit" value="查詢" class="btn btn-default" id="btnsearch" />
            
        </div>
    </div>

}
<div class="col-md-offset-1 col-md-10 MenuTags" style="margin-top: 20px;">
    @foreach (var item in Model)
    {
        <span data-class="@item.MenuClass" data-no="@item.MenuNo" class="tag label label-default MenuName">@item.MenuName　<i class="fa fa-times fa-2x del" aria-hidden="true"></i></span>
    }
</div>
@section Scripts {    
    <script>
        $(function () {
            $("#btnSave").hide();
            $("#btnCancel").hide();
            $("#btnaddnew,#btnsearch,#btnCancel,#btnSave").on("click", function (e) {
                $("#whosubmit").val(this.id);
            });
            $(".MenuTags .del").on("click", function (e) {
                e.stopPropagation();
                if (confirm("確定刪除?"))
                {
                    $("#whosubmit").val("btndel");
                }
                $("#MenuNo").val($($(this).parent()).data("no"));
                $("form").submit();
            });
            $(".MenuTags .MenuName").on("click", function (e) {
                e.stopPropagation();
                $("#MenuName").val($(this).text().replace("　", ""));
                $("#MenuNo").val($(this).data("no"));
                $("#MenuClass").val($(this).data("class"));
                $(".MenuTags").show();
                $("#btnSave").show();
                $("#btnCancel").show();
                $("#btnaddnew").hide();
                $("#btnsearch").hide();
                //$(this).text().replace("　","")
                //$(this).data("no")
                //$(this).data("class")
            });
            $("#btnCancel").on("click", function () {
                $(".MenuTags").show();
                $("#btnSave").hide();
                $("#btnCancel").hide();
                $("#btnaddnew").show();
                $("#btnsearch").show();
            });
        });
    </script>
}